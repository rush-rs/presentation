% LTeX: language=de-DE
\section{Einstieg \& Motivation}
\begin{frame}{Einstieg \& Motivation}
	\begin{itemize}
		\item Programme werden in speziellen Sprachen verfasst
		\item Vorteile eines hohen Abstraktionsgrades~\scite[S.~9]{Dandamudi2005Risc}
	\end{itemize}

	\begin{figure}[h]
		\begin{minipage}{.32\textwidth}
			\begin{center}
				\centering
				\centerline{\includegraphics[width=.5\textwidth]{assets/google_icon_construction.png}}
				{\small Erweiterbarkeit \& Reperatur}
			\end{center}
		\end{minipage}
		\hfill
		\begin{minipage}{.32\textwidth}
			\begin{center}
				\centerline{\includegraphics[width=.5\textwidth]{assets/google_icon_deployed_code.png}}
				{\small Portabilität \& Platformunabhängigkeit}
			\end{center}
		\end{minipage}
		\hfill
		\begin{minipage}{.32\textwidth}
			\begin{center}
				\centerline{\includegraphics[width=.5\textwidth]{assets/google_icon_speed.png}}
				{\small Geschwindigkeit \& Einfachheit }
			\end{center}
		\end{minipage}
		% citation
		\begin{center}
			\scite{googleFonts}
		\end{center}
	\end{figure}
\end{frame}

\begin{frame}{Zentrales Problem}
	\begin{minipage}{.35\textwidth}
		\Lirsting[float=H, fancyvrb={frame=none, fontsize=\small}]{deps/paper/listings/simple.rush}
	\end{minipage}%
	\hfill
	\Larrow{
		\begin{minipage}{0.9cm}
			Vorgang
		\end{minipage}
		\begin{minipage}{5mm}
			\includegraphics[width=3.5mm]{assets/google_icon_settings.png}
		\end{minipage}
	}
	\hfill
	\begin{minipage}{.34\textwidth}
		% \Lirsting[float=H, fancyvrb={frame=none, fontsize=\small}, ranges={1-10}]{listings/rush_simple.hexdump}
		\centerline{\includegraphics[width=.5\textwidth]{assets/google_icon_question_mark.png}}
	\end{minipage}

	\begin{itemize}
		\item Programme sollten \cemph{einfach} zu schreiben sein
		\item[\Rightarrow] Ein Computer muss diese jedoch auch \cemph{einfach} verarbeiten
	\end{itemize}
\end{frame}

\begin{frame}{Methoden zur Programmausführung}
	\begin{itemize}
		\item Man unterscheidet zwischen \cemph{Compilern} und \cemph{Interpretern}
		\item Compiler: übersetzt das Programm in ein Zielformat
		\item Interpreter: führt das Programm direkt aus (keine Übersetzung)
	\end{itemize}
\end{frame}

\begin{frame}{Interpreter}
	\hfill
	\begin{minipage}{.35\textwidth}
		\begin{center}
			\Lirsting[float=H, fancyvrb={frame=none, fontsize=\small}]{deps/paper/listings/simple.rush}
		\end{center}
	\end{minipage}%
	\Larrow{
		\begin{minipage}{1.3cm}
			Ausführung
		\end{minipage}
		\begin{minipage}{5mm}
			\includegraphics[width=3.5mm]{assets/google_icon_settings.png}
		\end{minipage}
	}
	\hfill
	\begin{minipage}{.35\textwidth}
		\centering
		{\LARGE Exit code: 5}
	\end{minipage}
	\hfill

	\begin{itemize}
		\item Python, Javascript, PHP, usw.
		\item Keine Übersetzung notwending
		\item[\Rightarrow] Interpretiert den Syntaxbaum direkt
	\end{itemize}
\end{frame}

\begin{frame}{Compiler}
    \hspace{.8cm}
	\begin{minipage}{.35\textwidth}
		\begin{center}
			\Lirsting[float=H, fancyvrb={frame=none, fontsize=\small}]{deps/paper/listings/simple.rush}
		\end{center}
	\end{minipage}%
	\Larrow{
		\begin{minipage}{1.45cm}
			Übersetzung
		\end{minipage}
		\begin{minipage}{5mm}
			\includegraphics[width=3.5mm]{assets/google_icon_settings.png}
		\end{minipage}
	}
    \hspace{1.9cm}
	\begin{minipage}{.26\textwidth}
		\Lirsting[float=H, fancyvrb={frame=none, fontsize=\small}, ranges={1-10}]{listings/rush_simple.hexdump}
	\end{minipage}
	\hfill

	\begin{itemize}
		\item Rust, C, Go, usw.
		\item Zusätzlicher Prozess
		\item Umwandlung in ein anderes Format
		\item[\Rightarrow] Muss vor der Ausführung stattfinden
	\end{itemize}
\end{frame}

\section{Die Programmiersprache \enquote{rush}}

\begin{frame}{Fakten über rush}
	\begin{figure}[h]
		\flushleft
		\hspace{.15cm} \rushlogo{y=0.80pt, x=0.80pt, yscale=-0.15, xscale=0.15}
		\vspace{.2cm}
	\end{figure}
	\begin{itemize}
		\item ca.\ vier Monate intensive Entwicklung
		\item \rushCountCommits~Git Commits
		\item \tokei{./deps/rush} Zeilen Programmtext\footnote{Leerzeilen und Kommentare werden nicht gezählt.} in Git Commit `\rushCommit'
	\end{itemize}
\end{frame}

\begin{frame}{Inhalte des Projektes}
	\begin{itemize}
		\item Lexer
		\item Parser
		\item Semantikanalyse
		\item zwei Interpreter
		\item ein Transpiler
		\item vier Compiler
	\end{itemize}
\end{frame}

\begin{frame}{Fähigkeiten von rush \TODO{MAYBE SPLIT FEATURES ACROSS SLIDES}}
	\begin{table}[h]
		\rowcolors{2}{gray!15}{}
		\begin{tabularx}{0.9\textwidth}{Ll}
			\rowcolor{gray!25} Bezeichnung & Beispiel                                          \\
			\hline
			Schleife                       & \LirstInline{rush}{loop {  }}                     \\
			while-Schleife                 & \LirstInline{rush}{while x < 5 {  }}              \\
			for-Schleife                   & \LirstInline{rush}{for i = 0; i < 5; i += 1 {  }} \\
			if-Verzweigung                 & \LirstInline{rush}{if true {  } else {  }}        \\
			Funktionsdefinition            & \LirstInline{rush}{fn foo(n: int) {  }}           \\
			infix-expression               & \LirstInline{rush}{1 + n; 5 ** 2}                 \\
			prefix-expression              & \LirstInline{rush}{!false; -n}                    \\
			let-statement                  & \LirstInline{rush}{let mut answer = 42}           \\
			cast-expression                & \LirstInline{rush}{42 as float}                   \\
		\end{tabularx}
	\end{table}
\end{frame}

\begin{frame}{Datentypen in rush}
	\begin{table}[h]
		\rowcolors{2}{gray!15}{}
		\begin{tabularx}{0.9\textwidth}{LL}
			\rowcolor{gray!25} Bezeichnung & Instanziierung einer Variable            \\
			\hline
			\qVerb{int}                    & \LirstInline{rush}{let a: int = 0;}      \\
			\qVerb{float}                  & \LirstInline{rush}{let b: float = 3.14;} \\
			\qVerb{bool}                   & \LirstInline{rush}{let c: bool = true;}  \\
			\qVerb{char}                   & \LirstInline{rush}{let d: char = 'a';}   \\
			\qVerb{()}                     & \LirstInline{rush}{let e: () = main();}  \\
			\qVerb{!}                      & \LirstInline{rush}{let f = exit(42);}    \\
		\end{tabularx}
	\end{table}
\end{frame}

\begin{frame}{Berechnung von Fibonaccizahlen in rush}
	\begin{minipage}{.6\textwidth}
		\Lirsting[float=H]{deps/paper/listings/fib.rush}
	\end{minipage}
	\begin{minipage}{.3\textwidth}
		\begin{align*}
			f_n & = f_{n-2} + f_{n-1} & ; n \ge 3 \\
			f_1 & = f_2 = 1
		\end{align*}
	\end{minipage}
\end{frame}

\begin{frame}{Umfang der einzelnen Komponenten}
	\begin{table}[h]
		\centering
		\begin{tabularx}{0.9\textwidth}{LL}
			\rowcolor{gray!20} Komponente               & Zeilen Programmtext                              \\ \hline
			Lexer / Parser                              & \tokei{./deps/rush/crates/rush-parser}           \\ \hline
			\rowcolor{gray!30} Tree-walking interpreter & \tokei{./deps/rush/crates/rush-interpreter-tree} \\ \hline
			VM compiler / runtime                       & \tokei{./deps/rush/crates/rush-interpreter-vm}   \\ \hline
			WASM compiler                               & \tokei{./deps/rush/crates/rush-compiler-wasm}    \\ \hline
			\rowcolor{gray!30} LLVM compiler            & \tokei{./deps/rush/crates/rush-compiler-llvm}    \\ \hline
			RISC-V compiler                             & \tokei{./deps/rush/crates/rush-compiler-risc-v}  \\ \hline
			\rowcolor{gray!30} x86 compiler             & \tokei{./deps/rush/crates/rush-compiler-x86-64}  \\ \hline
		\end{tabularx}
	\end{table}
\end{frame}

\begin{frame}{Stufen der Übersetzung~\scite[S.~6--7]{wirth_compiler_construction_2005} \TODO{MAYBE DELETE}}
	\hspace{0pt} % This is somehow required
	\vfill
	\begin{figure}[h]
		\begin{adjustbox}{max totalsize={\textwidth}{!},center}
			\begin{tikzpicture}[node distance=1cm, inner sep=3mm]
				\node (lexical_analysis) [rec, minimum height=1.5cm] {Lexikalische Analyse};
				\node (syntactic_analysis) [rec, right=of lexical_analysis, align=center, minimum height=1.5cm] {Syntaxanalyse};
				\draw [arrow] (lexical_analysis) -- (syntactic_analysis);
				\node (semantic_analysis) [rec, right=of syntactic_analysis, align=center, minimum height=1.5cm] {Semantische\\Analyse};
				\draw [arrow] (syntactic_analysis) -- (semantic_analysis);
				\node (codegen) [rec, right=of semantic_analysis, minimum height=1.5cm] {Code-Erzeugung};
				\draw [arrow] (semantic_analysis) -- (codegen);
			\end{tikzpicture}
		\end{adjustbox}
	\end{figure}
	\vfill
	\begin{figure}[h]
		\begin{adjustbox}{max totalsize={\textwidth}{!},center}
			\begin{tikzpicture}[node distance=3mm and 1cm, inner sep=3mm]
				\node (syntactic_analysis_text) [inner sep=0] {Syntaxanalyse};
				\node (lexical_analysis) [rec, below=of syntactic_analysis_text] {Lexikalische Analyse};
				\node (syntactic_analysis) [rec, fit={(syntactic_analysis_text) (lexical_analysis)}] {};
				\node (semantic_analysis) [rec, right=of syntactic_analysis] {Semantische Analyse};
				\draw [arrow] (syntactic_analysis) -- (semantic_analysis);
				\node (codegen) [rec, right=of semantic_analysis] {Code-Erzeugung};
				\draw [arrow] (semantic_analysis) -- (codegen);
			\end{tikzpicture}
		\end{adjustbox}
	\end{figure}
	\vfill
\end{frame}
